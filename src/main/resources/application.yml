server:
  port: 8081

spring:
  application:
    name: demo
  rabbitmq:
    host: localhost
    port: 5672
    username: guest
    password: guest

  datasource:
    url: jdbc:h2:mem:modulith;MODE=LEGACY;DB_CLOSE_DELAY=-1
    driver-class-name: org.h2.Driver
  jpa:
    hibernate:
      ddl-auto: update

  modulith:
    events:
      externalization:
        enabled: false
      jdbc:
        schema-initialization:
          enabled: true
      republish-outstanding-events-on-restart: true

logging:
  level:
    org.springframework.modulith: INFO
    org.springframework.amqp: INFO

app:
  amqp:
    new-orders:
      # Control whether to bind queue 'new-orders' to exchange 'BookStoreExchange' with routing key 'orders.new'.
      # Default false to avoid unintended feedback loops with @Externalized(OrderCreatedEvent).
      bind: false
